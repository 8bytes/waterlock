<h2 class="section-header">Configuration</h2>
<p>Before diving in and using your Jwt's you'll need to configure them. This is done via the <code>waterlock.js</code> file located in your Sails config folder. If you used the Waterlock generator then you'll already have that file along with default values. You will still need to modify them so crack it open and you should see the following.</p>
<div>
  <pre>
    <code class="js">
jsonWebTokens:{
  secret: "this is my secret",
  expiry:{
    unit: "days",
    length: "7"
  },
  audience: "app name",
  subject: "subject"
}
    </code>
  </pre>
</div>
<h3>Secret</h3>
<p>This is the value used to encrypt the Jwt's</p>
<h3>Expiry</h3>
<p>This is an object containing information on when the tokens should be expired after they are issued. These values are passed to the Moment.js <a href="http://momentjs.com/docs/#/manipulating/add/">add</a> function.
<h3>Audience</h3>
<p>This is the <code>aud claim</code> of the Jwt. Typically this can simply be the name of your app.</p>
<h3>Subject</h3>
<p>This is the <code>sub claim</code> of the Jwt.

<h2 class="section-header">Requesting Tokens</h2>
<p>Your user can request tokens, once they are authenticated, by navigating to the following URI <code>/user/jwt</code>. This will return a JSON response containing the JSON Web Token and it's expiration date, (which is configurable as shown above.) If the user does not have an authenticated session open a token will not be created and instead the server will respond with <code>res.forbidden</code>.

<h2 class="section-header">Token Policy</h2>
<p>So you have your tokens configured and you can request them, but they aren't doing any actual securing of resources yet. To do this you can use the <code>hasJsonWebToken.js</code> policy that was generated by using the Waterlock script. This is a simple policy that allows your user to request access to a resource by providing the <code>access_token</code> (the jwt) attribute either as a <code>GET</code> or <code>POST</code> parameter. This is applied just like any other <a href="http://sailsjs.org/#!documentation/policies">Sails policy</a>. So you can check out their documentation to learn more.